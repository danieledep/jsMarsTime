function protected_mod(t,a){return t<0?(t-Math.floor(t/a)*a)%a:t%a}function west_to_east(t){return protected_mod(360-t,360)}function east_to_west(t){return west_to_east(t)}function j2000_epoch(){return 2451545}function mills(){return d=new Date,d.getTime()}function julian(t){return 2440587.5+t/864e5}function utc_to_tt_offset(t){for(var a=new Array(-2441318.5,0,182,366,731,1096,1461,1827,2192,2557,2922,3469,3834,4199,4930,5844,6575,6940,7487,7852,8217,8766,9313,9862,12419,13515,14792),r=0;r<a.length;r++)a[r]+=2441317.5;var e,n=new Array(-32.184,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35);for(r=0;r<n.length;r++)n[r]+=32.184;if(t>a[a.length-1])e=a.length-1;else if(t<a[0])e=0;else for(e=0;e<a.length-2&&!(t>a[e]&&t<a[e+1]);e++);return n[e]}function julian_tt(t){return t+utc_to_tt_offset(t)/86400}function j2000_offset_tt(t){return t-j2000_epoch()}function Mars_Mean_Anomaly(t){return protected_mod(19.387+.52402075*t,360)}function FMS_Angle(t){return protected_mod(270.3863+.5240384*t,360)}function alpha_perturbs(t){for(var a=new Array(.0071,.0057,.0039,.0037,.0021,.002,.0018),r=new Array(2.2353,2.7543,1.1177,15.7866,2.1354,2.4694,32.8493),e=new Array(49.409,168.173,191.837,21.736,15.704,95.528,49.095),n=0,o=0;o<a.length;o++)n+=a[o]*Math.cos((.985626*t/r[o]+e[o])*Math.PI/180);return n}function equation_of_center(t){var a=Mars_Mean_Anomaly(t)*Math.PI/180,r=alpha_perturbs(t);return(10.691+3e-7*t)*Math.sin(a)+.623*Math.sin(2*a)+.05*Math.sin(3*a)+.005*Math.sin(4*a)+5e-4*Math.sin(5*a)+r}function Mars_Ls_String(t){var a,r=new Array(0,30,60,90,120,150,180,210,240,270,300,330),e=new Array("Early NH Spring","NH Spring","Late NH Spring","Early NH Summer","NH Summer","Late NH Summer","Early NH Fall","NH Fall","Late NH Fall","Early NH Winter","NH Winter","Late NH Winter");for(a=0;a<r.length-2&&!(t>r[a]&&t<r[a+1]);a++);return e[a]}function Mars_Ls(t){var a=FMS_Angle(t)+equation_of_center(t);return a=protected_mod(a,360)}function equation_of_time(t){var a=Mars_Ls(t)*Math.PI/180;return 2.861*Math.sin(2*a)-.071*Math.sin(4*a)+.002*Math.sin(6*a)-equation_of_center(t)}function j2000_from_Mars_Solar_Date(t){return 1.027491252*(t+96e-5-44796)+4.5}function j2000_ott_from_Mars_Solar_Date(t){return julian_tt(j2000_from_Mars_Solar_Date(t)+j2000_epoch())-j2000_epoch()}function Mars_Solar_Date(t){return(t-4.5)/1.027491252+44796-96e-5}function Clancy_Year(t){return Math.floor(1+(t- -16336.0416)/686.978)}function Mars_Year(t){if(jday_vals=new Array(-16336.044076,-15649.093471,-14962.0892946,-14275.0960023,-13588.1458658,-12901.1772635,-12214.2082215,-11527.2637345,-10840.2842249,-10153.2828749,-9466.3114025,-8779.3356111,-8092.3607738,-7405.4236452,-6718.4615347,-6031.4574604,-5344.4876509,-4657.5318339,-3970.5474528,-3283.5848372,-2596.6329362,-1909.6426682,-1222.6617049,-535.7040268,151.2736522,838.2369682,1525.1834712,2212.1799182,2899.1848518,3586.1403058,4273.1024234,4960.0765368,5647.0207838,6333.986502,7020.9875066,7707.9629132,8394.9318782,9081.9102062,9768.8526533,10455.8028354,11142.8050514,11829.7873254,12516.7417734,13203.725449,13890.6991502,14577.6484912,15264.6324865,15951.6217969,16638.5798914,17325.5517216,18012.5209097,18699.4628887,19386.4443201,20073.4534421,20760.4152811,21447.3696661,22134.3466251,22821.2966642,23508.2529432,24195.2539572,24882.2400506,25569.2081296,26256.1902459,26943.1429481,27630.0847446,28317.0793316,29004.0710936,29691.0238241,30377.9991486,31064.9784277,31751.9249377,32438.896907,33125.8902412,33812.8520242,34499.8183442,35186.7944595,35873.740573,36560.7112423,37247.7247318),year_vals=new Array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79),year_length=new Array(686.95252,686.950605,687.0041764,686.9932923,686.9501365,686.9686023,686.969042,686.944487,686.9795096,687.00135,686.9714724,686.9757914,686.9748373,686.9371286,686.9621105,687.0040743,686.9698095,686.955817,686.9843811,686.9626156,686.951901,686.990268,686.9809633,686.9576781,686.977679,686.963316,686.946503,686.996447,687.0049336,686.955454,686.9621176,686.9741134,686.944247,686.9657182,687.0010046,686.9754066,686.968965,686.978328,686.9424471,686.9501821,687.002216,686.982274,686.954448,686.9836756,686.9737012,686.949341,686.9839953,686.9893104,686.9580945,686.9718302,686.9691881,686.941979,686.9814314,687.009122,686.961839,686.954385,686.976959,686.9500391,686.956279,687.001014,686.9860934,686.968079,686.9821163,686.9527022,686.9417965,686.994587,686.991762,686.9527305,686.9753245,686.9792791,686.94651,686.9719693,686.9933342,686.961783,686.96632,686.9761153,686.9461135,686.9706693,687.0134895),t<jday_vals[0])return Math.floor(1+(t-jday_vals[0])/year_length[0]);if(t>jday_vals[jday_vals.length-1])return Math.floor(1+(1-jday_vals[jday_vals.length-1])/year_length[jday_vals.length-1]);var a=0;for(a=0;a<year_vals.length-1&&!(jday_vals[a]<=t&&jday_vals[a+1]>t);a++);return year_vals[a]}function Coordinated_Mars_Time(t){var a=24*((t-4.5)/1.027491252+44796-96e-5);return a=protected_mod(a,24)}function Local_Mean_Solar_Time(t,a){var r=Coordinated_Mars_Time(a)-t*(24/360);return r=protected_mod(r,24)}function Local_True_Solar_Time(t,a){var r=equation_of_time(a),e=Local_Mean_Solar_Time(t,a)+r*(24/360);return e=protected_mod(e,24)}function subsolar_longitude(t){return protected_mod(15*(Coordinated_Mars_Time(t)+24*equation_of_time(t)/360)+180,360)}function solar_declination(t){var a=t*Math.PI/180,r=Math.asin(.42565*Math.sin(a))+Math.PI/180*.25*Math.sin(a);return r=180*r/Math.PI}function heliocentric_distance(t){var a=Mars_Mean_Anomaly(t)*Math.PI/180;return 1.523679*(1.00436-.09309*Math.cos(a)-.004336*Math.cos(2*a)-31e-5*Math.cos(3*a)-3e-5*Math.cos(4*a))}function heliocentric_longitude(t){var a=Mars_Ls(t);return protected_mod(a+85.061-.015*Math.sin((71+2*a)*Math.PI/180)-55e-7*t,360)}function heliocentric_latitude(t){var a=Mars_Ls(t);return-(1.8497-223e-7*t)*Math.sin((a-144.5+257e-8*t)*Math.PI/180)}function hourangle(t,a){var r=subsolar_longitude(a)*Math.PI/180;return t*Math.PI/180-r}function solar_zenith(t,a,r){var e=hourangle(t,r),n=solar_declination(Mars_Ls(r))*Math.PI/180,o=Math.sin(n)*Math.sin(a*Math.PI/180)+Math.cos(n)*Math.cos(a*Math.PI/180)*Math.cos(e);return 180*Math.acos(o)/Math.PI}function solar_elevation(t,a,r){return 90-solar_zenith(t,a,r)}function solar_azimuth(t,a,r){var e=hourangle(t,r),n=solar_declination(Mars_Ls(r))*Math.PI/180,o=Math.cos(a)*Math.tan(n)-Math.sin(a)*Math.cos(e),_=Math.sin(e);return protected_mod(360+180*Math.atan2(_,o)/Math.PI,360)}export{protected_mod,west_to_east,east_to_west,j2000_epoch,mills,julian,utc_to_tt_offset,julian_tt,j2000_offset_tt,Mars_Mean_Anomaly,FMS_Angle,alpha_perturbs,equation_of_center,Mars_Ls_String,equation_of_time,j2000_from_Mars_Solar_Date,j2000_ott_from_Mars_Solar_Date,Mars_Solar_Date,Clancy_Year,Mars_Year,Coordinated_Mars_Time,Local_Mean_Solar_Time,Local_True_Solar_Time,subsolar_longitude,solar_declination,heliocentric_distance,heliocentric_longitude,heliocentric_latitude,hourangle,solar_zenith,solar_elevation,solar_azimuth};
